<Project Sdk="Microsoft.NET.Sdk.Razor">

	<PropertyGroup>
		<TargetFramework>net7.0</TargetFramework>
		<Nullable>enable</Nullable>
		<ImplicitUsings>enable</ImplicitUsings>
		<IsWindows Condition="'$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::Windows)))' == 'true'">true</IsWindows>
		<IsOSX Condition="'$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::OSX)))' == 'true'">true</IsOSX>
		<IsLinux Condition="'$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::Linux)))' == 'true'">true</IsLinux>
	</PropertyGroup>

	<PropertyGroup Condition="'$(IsWindows)'=='true'">
		<DefineConstants>Windows</DefineConstants>
	</PropertyGroup>
	<PropertyGroup Condition="'$(IsOSX)'=='true'">
		<DefineConstants>OSX</DefineConstants>
	</PropertyGroup>
	<PropertyGroup Condition="'$(IsLinux)'=='true'">
		<DefineConstants>Linux</DefineConstants>
	</PropertyGroup>

	<ItemGroup>
		<PackageReference Include="BlazorMonaco" Version="2.1.0" />
		<PackageReference Include="JsonPathLINQ" Version="1.0.0-alpha.7" />
		<PackageReference Include="KubernetesClient" Version="9.0.38" />
		<PackageReference Include="KubernetesCRDModelGen" Version="1.0.0-alpha.25" />
		<PackageReference Include="KubernetesCRDModelGen.Models.fluxcd.io" Version="1.0.0-alpha.25" />
		<PackageReference Include="Microsoft.AspNetCore.Components.Web" Version="7.0.0-rc.2.22476.2" />
		<PackageReference Include="Microsoft.Extensions.Caching.Abstractions" Version="7.0.0-rc.2.22472.3" />
		<PackageReference Include="Microsoft.Extensions.Configuration.Abstractions" Version="7.0.0-rc.2.22472.3" />
		<PackageReference Include="Microsoft.Extensions.Logging.Abstractions" Version="7.0.0-rc.2.22472.3" />
		<PackageReference Include="MudBlazor" Version="6.0.17" />
		<PackageReference Include="PropertyChanged.Fody" Version="4.0.5" PrivateAssets="All" />
		<PackageReference Include="SharpZipLib" Version="1.4.0" />
		<PackageReference Include="SystemTextJson.JsonDiffPatch" Version="1.3.1" />
		<PackageReference Include="WindowsAPICodePack-Shell" Version="1.1.1" Condition="'$(IsWindows)'=='true'" />
		<PackageReference Include="XtermBlazor" Version="1.6.1" />
		<PackageReference Include="YamlDotNet.System.Text.Json" Version="1.2.0" />
	</ItemGroup>

	<ItemGroup>
		<Content Update="wwwroot\**">
			<CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
		</Content>
	</ItemGroup>

	<Target Name="EmbedResolveReferences" AfterTargets="ResolveReferences">
		<ItemGroup>
			<FilesToEmbed Include="@(ReferencePath)" Condition="('%(ReferencePath.Filename)' == 'KubernetesCRDModelGen.Models.fluxcd.io')" />
			<XmlFilesToEmbed Include="@(FilesToEmbed->'%(RelativeDir)%(FileName).xml'-> Exists())" Condition="('%(FilesToEmbed.Filename)' == 'KubernetesCRDModelGen.Models.fluxcd.io')" />

			<!-- add xml documentation for list of assemblies -->
			<EmbeddedResource Include="@(XmlFilesToEmbed)">
				<LogicalName>model.docs.%(XmlFilesToEmbed.Filename)%(XmlFilesToEmbed.Extension)</LogicalName>
			</EmbeddedResource>
		</ItemGroup>

		<Message Importance="high" Text="EmbeddingXml: @(XmlFilesToEmbed->'%(Filename)%(Extension)', ', ')" />
	</Target>

</Project>
