@using BlazorMonaco
@using System.Text.Json.JsonDiffPatch.Diffs
@using YamlDotNet.System.Text.Json

<KubeMonacoEditor Value="@diffYson" Language="yaml" />

@code {
    [Parameter] public JsonDiffDelta Diff { get; set; }
    [Parameter] public IKubernetesObject<V1ObjectMeta> Left { get; set; }
    [Parameter] public IKubernetesObject<V1ObjectMeta> Right { get; set; }

    private string diffYson;

    protected override void OnInitialized()
    {
        if (Diff.Document == null)
        {
            Diff = ObjectCompare.CompareObjects(Left, Right);
        }

        if (Diff.Document != null)
        {
            diffYson = YamlConverter.Serialize(Diff.Document);
        }
    }
}
