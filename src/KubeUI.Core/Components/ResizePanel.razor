@using MudBlazor.Services

@if (Height != null)
{
    <div style="@(SetHeigh ? $"height: {Height}" : "")">
    @ChildContent(Height)
</div>
}

@code {
    [Inject]
    private IResizeListenerService ResizeListenerService { get; set; }

    [Parameter]
    public RenderFragment<string> ChildContent { get; set; }

    [Parameter]
    public int Offset { get; set; }

    [Parameter]
    public bool SetHeigh { get; set; }

    private string? Height { get; set; }

    protected override async Task OnInitializedAsync()
    {
        ResizeListenerService.OnResized += ResizeListenerService_OnResized;

        var bs = await ResizeListenerService.GetBrowserWindowSize();

        Height = $"{bs.Height - Offset}px";
    }

    private void ResizeListenerService_OnResized(object? sender, BrowserWindowSize e)
    {
        Height = $"{e.Height - Offset}px";
        StateHasChanged();
    }
}
